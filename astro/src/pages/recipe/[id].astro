---
import { getRecipe } from "./../../utils/api.js";

import BaseLayout from "../../layouts/BaseLayout.astro";
import NotFoundLayout from "../../layouts/NotFoundLayout.astro";
import Recipe from "../../components/Recipe.astro";

/*
import { setCache } from "../../utils/cache";
*/
const { id } = Astro.params;

const recipe = await getRecipe(id);

if (!recipe) {
  Astro.response.status = 404;
}

/* TODO add cache
setCache.short(Astro);
*/
---

{
  !recipe ? (
    <NotFoundLayout title="Recipe not found" message="The recipe you are looking for could not be found" />
  ) : (
    <BaseLayout title={recipe.title}>
      <Recipe recipe={recipe} />
    </BaseLayout>
  )
}